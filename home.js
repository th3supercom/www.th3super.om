var asString,URL_REGEX,URL_ONLY_REGEX,createReadonlyProperty,createNamespace,createEnum,Language,EventService,ajaxService,dictionaryService,ariaModule,telemetryServices,services,templatesManager,DictionaryView,helpers;String.prototype.hashCode=function(){var n=0,t,i,r;if(this.length===0)return n;for(t=0,r=this.length;t<r;t++)i=this.charCodeAt(t),n=(n<<5)-n+i|0;return n};String.prototype.format=function(n,t){function u(t,i){if(!t)return"";i==null&&(i=!0);var r="";return typeof t=="function"?r=t(this):t instanceof jQuery?r=t.val()||t.text():typeof t=="string"&&(r=t),n&&i&&(r=f(r)),r}function f(t){if(n==null||n.length===0||t==null)return t;for(var i=0;i<n.length;i++)t=t.replace("{"+i+"}",u(n[i],!1));return t}var i,r;if(n==null)return this;for(i=this.valueOf(),r=0;r<n.length;r++)i=i.replace("{"+r+"}",u(n[r],!0));return t?t(i):i};String.prototype.lastIndexOfAny=function(n,t){var i,u,r;for((typeof t!="number"||t<0||t>=this.length)&&(t=this.length-1),i=t;i>=0;i--)for(u=this.charAt(i),r=0;r<n.length;r++)if(u===n[r])return i;return-1};asString=function(n,t){return typeof n=="string"?n:(typeof t=="undefined"&&(t=""),t)};typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});typeof String.prototype.contains!="function"&&(String.prototype.contains=function(n){return this.indexOf(n)>=0});URL_REGEX=/((?:https?:\/\/)?(?:[\da-z-]+\.){2,}[a-z]{2,6}|https?:\/\/[\da-z-]+\.[a-z]{2,6}|[\da-z-]+\.[a-z]{2,6}(?=\/|:\d))(:\d{1,5})?(\/[^?&#\s]*\/?)?(\?[^=&#\s]*(?:=[^&#\s]*)?(?:&(?:[^=&#\s]+(?:=[^&#\s]*)?)?)*)?(\#[^=&\s]*(?:=[^&\s]*)?(?:&(?:[^=&\s]+(?:=[^&\s]*)?)?)*)?/i;URL_ONLY_REGEX=/^((?:https?:\/\/)?(?:[\da-z-]+\.){2,}[a-z]{2,6}|https?:\/\/[\da-z-]+\.[a-z]{2,6}|[\da-z-]+\.[a-z]{2,6}(?=\/|:\d))(:\d{1,5})?(\/[^?&#\s]*\/?)?(\?[^=&#\s]*(?:=[^&#\s]*)?(?:&(?:[^=&#\s]+(?:=[^&#\s]*)?)?)*)?(\#[^=&\s]*(?:=[^&\s]*)?(?:&(?:[^=&\s]+(?:=[^&\s]*)?)?)*)?$/i,function(n){n.fn.enterPressed=function(n){typeof n=="function"&&this.keypress(function(t){t.which===13&&(t.preventDefault(),n(t))})};n.fn.clickOrEnter=function(n){typeof n=="function"&&(this.click(n),this.enterPressed(n))};n.fn.sanitizeHtmlAndSetText=function(t){typeof t=="string"&&this.text(n("<div/>").html(t).text())}}(jQuery);createReadonlyProperty=function(n,t,i,r){if(n&&typeof t=="string"){if(typeof Object.defineProperty!="function"){n[t]=i;return}try{Object.defineProperty(n,t,{configurable:!1,enumerable:r!==!0,get:function(){return i},set:function(){throw"Trying to change a readonly value '"+t+"'";}})}catch(u){n[t]=i}}};Function.prototype.extend=function(n){return n.constructor==Function?(this.prototype=new n,this.prototype.constructor=this,this.prototype.parent=n.prototype):(this.prototype=n,this.prototype.constructor=this,this.prototype.parent=n),this};createNamespace=function(n){var i,r,t;for(n=asString(n),i=window,r=n.split("."),t=0;t<r.length;t++)r[t].length!==0&&(Object.prototype.hasOwnProperty.call(i,r[t])===!1&&(i[r[t]]={}),i=i[r[t]]);return i};typeof Object.freeze!="function"&&(Object.freeze=function(n){return n});createNamespace("Microsoft.JS");createEnum=function(){for(var t={},n=0;n<arguments.length;n++)t[arguments[n]]=arguments[n];return Object.freeze(t)};Array.prototype.some||(Array.prototype.some=function(n){"use strict";var t;if(this==null)throw new TypeError("Array.prototype.some called on null or undefined");if(typeof n!="function")throw new TypeError;var i=Object(this),r=i.length>>>0,u=arguments.length>=2?arguments[1]:void 0;for(t=0;t<r;t++)if(t in i&&n.call(u,i[t],t,i))return!0;return!1}),function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?module.exports=n(require("jquery")):n(jQuery)}(function(n){function i(n){return t.raw?n:encodeURIComponent(n)}function f(n){return t.raw?n:decodeURIComponent(n)}function e(n){return i(t.json?JSON.stringify(n):String(n))}function o(n){n.indexOf('"')===0&&(n=n.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return n=decodeURIComponent(n.replace(u," ")),t.json?JSON.parse(n):n}catch(i){}return null}function r(i,r){var u=t.raw?i:o(i);return n.isFunction(r)?r(u):u}var u=/\+/g,t=n.cookie=function(u,o,s){var v,c;if(arguments.length>1&&!n.isFunction(o))return s=n.extend({},t.defaults,s),typeof s.expires=="number"&&(v=s.expires,c=s.expires=new Date,c.setMilliseconds(c.getMilliseconds()+v*864e5)),document.cookie=[i(u),"=",e(o),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("");for(var l=u?undefined:{},y=document.cookie?document.cookie.split("; "):[],a=0,b=y.length;a<b;a++){var p=y[a].split("="),w=f(p.shift()),h=p.join("=");if(u===w){l=r(h,o);break}u||(h=r(h))===undefined||(l[w]=h)}return l};t.defaults={};n.removeCookie=function(t,i){return n.cookie(t,"",n.extend({},i,{expires:-1})),!n.cookie(t)}});Language=function(n,t,i,r){var u,f;this.isAutoDetect=function(){return u.id===constants.autoDetectKey};this.getTextDirection=function(){return u.isRtl===!0?"rtl":u.isRtl===!1?"ltr":""};this.clone=function(){return $.extend(!0,{},u)};u=this;arguments.length==1&&typeof n=="string"&&(f=ALL_LANGUAGES[n],f&&(t=f.lang,i=f.display,r=f.isRtl));this.id=asString(n,"");this.lang=asString(t,"");this.display=asString(i,"");this.isRtl=r===!0?!0:r===!1?!1:null};EventService=function(){var t=this,n={};this.fire=function(i,r){var f,u,e;if(typeof i=="string"&&(i={type:i,data:r}),i.target||(i.target=this),!i.type)throw new Error("Event object missing 'type' property.");if(n[i.type]instanceof Array)for(f=n[i.type],u=0,e=f.length;u<e;u++)f[u].call(this,i);return t};this.removeListener=function(i,r){var f,u,e;if(n[i]instanceof Array)for(f=n[i],u=0,e=f.length;u<e;u++)if((r==null||f[u]===r)&&(f.splice(u,1),r!=null))break;return t};this.addListener=function(i,r){return typeof n[i]=="undefined"&&(n[i]=[]),n[i].push(r),t}},function(){Microsoft.JS.Event=Microsoft.JS.Event||function(n,t,i){createReadonlyProperty(this,"type",asString(n));createReadonlyProperty(this,"data",t);createReadonlyProperty(this,"source",i)};var n=function(n,t){var i=[],r=this;this.add=function(n){typeof n=="function"&&i.push(n)};this.remove=function(n){if(typeof n=="function")for(var t=0;t<i.length;t++)if(i[t]===n){i.splice(t,1);break}};this.fire=function(u,f){for(var s=new Microsoft.JS.Event(n,u,r),e=0;e<i.length;e++)try{i[e].call(f!==undefined?f:t,s)}catch(o){if(console&&typeof console.error=="function"&&console.error("Caught exception while firing event '"+n+"': "+o),constants.isDebug!==!0)throw o;}}};Microsoft.JS.EventService=Microsoft.JS.EventService||function(t){for(var i=this,r=1;r<arguments.length;r++)createReadonlyProperty(this,arguments[r],new n(arguments[r],t));this.addListener=function(n,t){return i.hasOwnProperty(asString(n))&&i[n].add(t),i};this.removeListener=function(n,t){return i.hasOwnProperty(asString(n))&&i[n].remove(t),i}}}(),function(){"use strict";function f(n,t){if(window.ActiveXObject)try{return new ActiveXObject(t),!0}catch(i){}else if(navigator&&navigator.plugins)return Array.prototype.some.call(navigator.plugins,function(t){return t&&t.name&&t.name.contains(n)});return!1}var r={events:new Microsoft.JS.EventService(this,"onplay","onend","onerror"),hasEvents:!1,createAudioElement:function(){return $()},play:function(){},stop:function(){}},u=function(){function i(i){t||(t=!0,n.events.onerror.fire({error:i},n))}this.hasEvents=!0;this.createAudioElement=function(t,r){var f='<audio width="0" height="0" preload="none">    <source type="audio/mpeg" src="'+t+'" />    <source type="audio/wav" src="'+r+'" /><\/audio>',u=$(f).bind("ended.IAudioPlayer",function(){n.events.onend.fire(null,n)}).bind("error.IAudioPlayer",i);return u[0].oncanplay?u.bind("canplay.IAudioPlayer",function(){n.events.onplay.fire(null,n)}):u.bind("play.IAudioPlayer",function(){n.events.onplay.fire(null,n)}),u.children("source").bind("error.IAudioPlayer",i),u};this.play=function(n){t=!1;n.play()};this.stop=function(n){n.pause();t=!1};var n=this,t=!1},t,i,n;u.extend(r);u.isSupported=function(){return Modernizr.audio&&(Modernizr.audio.wav.length>0||Modernizr.audio.mp3.length>0)};t=function(){function u(u){r();t=setInterval(function(){switch(u.playState){case 0:case 8:r();n.events.onend.fire(null,n);break;case 3:i||(n.events.onplay.fire(null,n),i=!0)}},250)}function r(){t&&(clearInterval(t),t=null);i=!1}this.hasEvents=!0;this.createAudioElement=function(n){var t='<embed src="'+n+'" width="0" height="0" type="audio/mpeg" hidden="true" autostart="true" loop="false" postdomevents="true" />';return $(t).css("display","none")};this.play=function(n){u(n)};this.stop=function(n){r();n.src=""};var n=this,t=null,i=!1};t.extend(r);t.isSupported=function(){return f("Windows Media","WMPlayer.OCX")};i=function(){this.hasEvents=!1;this.createAudioElement=function(n){var t='<bgsound src="'+n+'" >';return $(t)};this.play=function(){};this.stop=function(n){n.src=""}};i.extend(r);i.isSupported=function(){return"volume"in document.createElement("bgsound")};createNamespace("Microsoft.JS.Enums");n=Microsoft.JS.Enums.PlaybackState=createEnum("stopped","buffering","playing");Microsoft.JS.TTS=function(f){function w(n){var i=n.indexOf("-"),t;return i>=0&&(n=n.substring(0,i)),t=s.SEPARATORS[n.toLowerCase()],t||(t=s.SEPARATORS.defaultValues),t}function b(n,t,i){var o,s,r,e,u;if(n=n||$(),i=i||[],o=n.text().trim(),o.length<=f.maxCharacters){i.push(o);return}for(s=n.children(),r="",e=0;e<s.length;e++)(u=s.eq(e).text(),u.length!==0)&&(u.length>f.maxCharacters?v(u,t,i):u.length+r.length>f.maxCharacters?(i.push(r),r=u):r+=u);r.length>0&&i.push(r)}function v(n,t,i){var u,r;for(n=asString(n).trim(),t=asString(t),i=i||[],u=w(t);n.length>0;){if(n.length<=f.maxCharacters){i.push(n);break}if(r=n.lastIndexOfAny(u,f.maxCharacters),r>=0)i.push(n.substring(0,r)),n=n.substring(r);else{i.push(n);break}}}function k(n,t){var r=[],u,f,h,e,i,s;if(o.hasEvents||(n=n instanceof jQuery?n.text():asString(n,""),n=n.replace(/\n+/g," ").trim()),n instanceof jQuery)for(n=n||$(),u=n.children(),i=0;i<u.length;i++)(f=u.eq(i),h=f.text().trim(),h.length!==0)&&b(f,t,r);else{if(n=asString(n,"").trim(),n.length===0)return r;for(e=n.split("\n"),i=0;i<e.length;i++)(s=e[i].trim(),s.length!==0)&&v(s,t,r)}return r}function y(){if(l.length===0){h=n.stopped;s.events.onEnd.fire({ref:c});return}var i=l.shift(),t=f.ttsServiceUrl.replace("{locale}",encodeURIComponent(p)).replace("{text}",encodeURI(i.replace(/ +/g,"+"))).replace("{gender}",a==null?"":encodeURIComponent(a.toString())),r=t.replace("{media}",encodeURI("audio/wav"));t=t.replace("{media}",encodeURI("audio/mp3"));e&&e.length>0&&e.remove();e=o.createAudioElement(t,r);e.appendTo($(document.body));o.play(e[0])}var s;if(this.events=new Microsoft.JS.EventService(this,"onLoading","onPlay","onEnd","onError"),this.play=function(t,i,r,u){(this.stop(),l=k(t,i),l.length!==0)&&(h=n.buffering,c=u,p=i,a=r,o.hasEvents&&s.events.onLoading.fire({ref:c}),y(i,r,u))},this.stop=function(){h!==n.stopped&&(e.length>0&&(o.stop(e[0]),e.remove(),e=$()),l=[],h=n.stopped,s.events.onEnd.fire({ref:c}))},this.getState=function(){return h},s=this,createReadonlyProperty(this,"SEPARATORS",Object.freeze({defaultValues:[" ","?","!",".",":",","],ar:[" ","؟","!",".",":","،"],"zh-chs":[" ","？","！","。","："],"zh-cht":[" ","？","！","。","："],es:[" ","¿","?","¡","!",".",":",","],hi:[" ","?","!",".",":",",","।"],th:[" ","!",":"],ja:[" ","？","!","。",":"]}),!0),f=$.extend({ttsServiceUrl:"",maxCharacters:2e3},f),asString(f.ttsServiceUrl,"").length===0)throw"You must specify the TTS service URL";var e=$(),l=[],h=n.stopped,c=null,p="",a=null,o=r;u.isSupported()?o=new u:t.isSupported()?o=new t:i.isSupported()&&(o=new i);o.hasEvents&&(o.events.onend.add(function(){y()}),o.events.onerror.add(function(t){h=n.stopped;var i={ref:c,inner:t.data};e.length>0&&(i.error=e[0].error);s.events.onError.fire(i)}),o.events.onplay.add(function(){h===n.buffering&&(s.events.onPlay.fire({ref:c}),h=n.playing)}))}}();var HoverButton=function(n){var i,t;if(n.src==null)throw"You mus specify a source element.";i=$(n.src);this.inClass=n.inClass;this.outClass=n.outClass;t=this;i.hover(function(){$(this).removeClass(t.outClass).removeClass(t.inClass).addClass(t.inClass)},function(){$(this).removeClass(t.outClass).removeClass(t.inClass).addClass(t.outClass)})},EmailContent=function(n){this.settings=n;var t=this;this.sendEmail=function(){var r=typeof t.settings.body=="function"?t.settings.body():t.settings.body,i="mailto:"+(t.settings.to!=null?t.settings.to.format(n.replacements,encodeURI):"")+"?subject="+t.settings.subject.format(n.replacements,encodeURI)+"&body="+r.format(t.replacements,encodeURI);i.length<2e3&&(window.location=i)};this.replacements=[];(this.settings.trigger!=null&&this.settings.trigger instanceof jQuery||$(this.settings.trigger).length>0)&&$(this.settings.trigger).click(this.sendEmail);n.replacements&&(this.replacements=n.replacements)},InclusionLink=function(n){function i(){var i=new helpers.events.LinkEvent(t.settings.isMobile),n;t.events.fire("onLinkActivated",i);n=t.settings.url.format(t.settings.replacements,encodeURI);t.settings.newWindow?window.open(n):window.location.href=n}var t=this;this.events=new EventService;this.settings=n;$(n.source).clickOrEnter(i)},VoiceOptionDialog=function(n){function v(n){var r,u;if(i!=null&&i[t]!=null)for(r=0;r<i[t].length;r++)if(i[t][r].locale===n)return w=n,u=new VoiceOptionCapabilities,u.canSelectDialect=!0,u.canSpeak=!0,u.canSelectGender=i[t][r].genders.length>1,u.genders=i[t][r].genders,u;throw"Unexpected error.  Should have found dialect for locale.";}function b(t){t!=null&&t!=constants.autoDetectKey&&t!==""&&(o.off("click.voiceOptions"),n.languageSpeakDialectsDataUrl&&$.ajax({async:!0,contentType:"application/json; charset=utf-8",dataType:"json",type:"GET",url:n.languageSpeakDialectsDataUrl.replace("{locale}",t),processData:!1}).done(y).fail(d))}function k(n){return i!=null&&i[n]?i[n]:(b(n),null)}function y(u){var s,h,a,e;o.on("click.voiceOptions",l);if(s=new VoiceOptionCapabilities,i[t]==null&&(i[t]=u||{}),r.clear(),i[t].length==0){f.events.fire("onUpdated",s);return}for(s.canSelectDialect=u.length>1,s.canSpeak=u!=null&&u.length>0,e=0;e<u.length;e++)r.addItem(u[e].locale,u[e].displayName),!s.canSelectGender&&u[e].genders!=null&&u[e].genders.length>1&&(s.canSelectGender=!0);if(r.rootLocale=t,r.resetOptions(),h=$.cookie(n.cookiePrefix+t),a=!1,h&&(a=r.setSelected(h)),!a){for(e=0;e<u.length;e++)if(u[e].locale===t){r.setSelected(u[e].locale);break}e===u.length&&(t==="en"?r.setSelected("en-US"):r.setSelected(u[0].locale))}s.canSelectDialect?c.show():c.hide();f.events.fire("onUpdated",s)}function d(n,t,i){f.events.fire("onUpdateError",{jqXHR:n,textStatus:t,errorThrown:i})}function p(n,t){return t=typeof t=="undefined"?!0:t,n==u?s.addClass(u.classIndicator):s.removeClass(u.classIndicator),t&&$.cookie(a,n.text,365),n.text}function l(n){n.stopPropagation();var t=p(s.hasClass(u.classIndicator)?h:u,!0),i=new helpers.events.SpeakEvent(t,"",!1,n);f.events.fire("onGenderChanged",i)}var f=this,e=$(n.src);if(!n.src||e.length===0)throw"Source element not specified.";if(!n.cookiePrefix)throw"You must specify a gender cookie name.";if(!n.languageSpeakDialectsDataUrl)throw"You must specify a URL for the language dialects data Url.";this.genderCookieName=n.cookiePrefix+"gender";this.getDialect=function(){return r.val};this.getSelectedGender=function(n){var t=v(n);return t.canSelectGender?s.hasClass(u.classIndicator)?u.text:h.text:t.genders.length==1&&t.genders[0].toLowerCase()===u.text?u.text:h.text};this.events=new EventService;this.setLocale=function(n){f.events.fire("onBeforeUpdate");r.clear();t=n;var i=k(n);i!=null&&y(i)};this.toggle=function(){var n=e.css("display")=="none";n?e.show():e.hide();f.events.fire("onDisplayToggled",{visible:n})};this.close=function(){e.hide();r.close();f.events.fire("onDisplayToggled",{visible:!1})};var i={},t=null,w=null,c=e.find(".dialectSelectorContainer"),o=e.find(".genderSelectionContainer"),s=e.find(".selectLR"),h={text:"male",classIndicator:"L"},u={text:"female",classIndicator:"R"},a=n.cookiePrefix+"Gender",r=new SpeakDialectsDropdown({src:c,cookiePrefix:n.cookiePrefix+"Dia"});r.events.addListener("onChange",function(n){var i=n.data,t=v(i),r;if(t!=null)t.canSelectGender?o.show():o.hide(),r=new helpers.events.SpeakEvent("",i,!1,n),f.events.fire("onSelectionChanged",r),f.events.fire("onUpdated",t);else throw"Unexpected error.  Should have found dialect for locale.";});$(document).click(function(){f.close()});o.on("click.voiceOptions",l);o.enterPressed(l);p($.cookie(a)===u.text?u:h,!1)},SpeakDialectsDropdown=function(n){var r=this,u=-1,e=$(n.src),i=e.find("ul.speechDialectsInnerDD"),t=null,o=e.find("span"),f=e.find(".speechDialectsDD"),s="";this.events=new EventService;this.valText="";this.val="";this.resetOptions=function(){t=i.find("li");t.on("click",function(){var f=$(this);r.valText=f.text();r.val=f.attr("locale");u=f.index();o.text(r.valText);t.children().removeClass("selected");u>-1?($(t[u]).children().addClass("selected"),i.attr("locale",$(t[u]).attr("locale"))):i.attr("locale","");$.cookie(n.cookiePrefix+s,i.attr("locale"),{expires:365});r.events.fire("onChange",i.attr("locale"))})};this.addItem=function(n,t){i.append("<li locale='"+n+"'><a href='#'>"+t+"<\/a><\/li>")};this.clear=function(){i.empty();r.val="";r.valText="";u=-1;o.text("")};this.setSelected=function(n){for(var i=0;i<t.length;i++)if($(t[i]).attr("locale")===n)return $(t[i]).click(),!0;return!1};this.close=function(){f.hasClass("active")&&f.toggleClass("active")};f.click(function(){return f.toggleClass("active"),!1});this.resetOptions();f.toggleClass("active")},VoiceOptionCapabilities=function(){this.canSpeak=!1;this.canSelectDialect=!1;this.canSelectGender=!1;this.genders=null},SpeakAndShare=function(n){function ot(){return constants.translatorHomeWithTextFormat.replace("{toLocale}",encodeURIComponent(n.languageDD.getSelectedLanguage().lang)).replace("{fromLocale}",constants.autoDetectKey).replace("{text}",encodeURIComponent(e.text()))}function b(n){return n.replace("{translatorLink}",encodeURIComponent(ot())).replace("{title}",encodeURIComponent(constants.emailSubject)).replace("{text}",encodeURIComponent(e.text())).replace("{textWithReference}",encodeURIComponent(e.text()+"\n\n"+constants.emailFooter+" – bing.com/translator"))}var t;if(n==null||n.src==null||$(n.src).length==0)throw"You must specify a container for the speak and share options.";if(n.tts==null)throw"You must supply a TTS instance.";if(!n.languageDD)throw"You must specify an associated language dropdown.";if(!n.cookiePrefix)throw"You must specify a cookie prefix.";var i=this,f=$(n.src),e=$(n.textSource),o=f.find(".speakButton"),a=f.find(".share"),v=f.find(".shareButtons"),tt=f.find(".button.facebook"),it=f.find(".button.twitter"),rt=f.find(".button.linkedIn"),k=v.find(".email"),y=f.parent().find(".section.speak"),p=y.find(".row.noSpeak"),u=y.find(".img.speak"),w=y.find(".row.genderSelectionContainer, .row.dialectSelectorContainer"),ut=f.parent().find(".section.search .img.bing"),l=f.find(".loadingButton"),c=f.find(".stopButton"),s=f.find(".speakDropdown"),ft=f.find(".search"),et=f.find(".voiceOptions"),h=n.tts,d,g,nt,r;this.events=new EventService;this.setLocale=function(n){return r=n};t=new VoiceOptionDialog({languageDD:n.languageDD,src:et,cookiePrefix:n.cookiePrefix,languageSpeakDialectsDataUrl:n.languageSpeakDialectsDataUrl});n.languageDD.events.addListener("onLanguageChanged",function(n){t.setLocale(i.setLocale(n.data.to.lang))});t.setLocale(n.languageDD.getSelectedLanguage().lang);k.clickOrEnter(function(n){var t=new helpers.events.ShareEvent;t.isEmail=!0;t.event=n;i.events.fire("onShareSelected",t);nt.sendEmail()});a.clickOrEnter(function(n){var t=new helpers.events.ShareEvent;t.event=n;i.events.fire("onShare",t);v.toggle();a.toggleClass("active");n.stopImmediatePropagation()});tt.clickOrEnter(function(){var n=new helpers.events.ShareEvent;n.isFacebook=!0;n.event=event;i.events.fire("onShareSelected",n);window.open(b(constants.share.facebookUrlPattern),"_blank")});it.clickOrEnter(function(){var n=new helpers.events.ShareEvent;n.isTwitter=!0;n.event=event;i.events.fire("onShareSelected",n);window.open(b(constants.share.twitterUrlPattern),"_blank")});rt.clickOrEnter(function(){var n=new helpers.events.ShareEvent;n.isLinkedIn=!0;n.event=event;i.events.fire("onShareSelected",n);window.open(b(constants.share.linkedInUrlPattern),"_blank")});e&&(nt=new EmailContent({trigger:k,body:function(){return"{0}\n\n"+constants.emailFooter+" – bing.com/translator"},subject:constants.emailSubject,replacements:[e]}),d=new InclusionLink({url:constants.bingSearchUrlFormat,source:ft,replacements:[e],newWindow:!0,isMobile:!1}),g=new InclusionLink({url:constants.bingSearchUrlFormat,source:ut,replacements:[e],newWindow:!0,isMobile:!0}),d.events.addListener("onLinkActivated",function(n){var u=new helpers.events.SpeakEvent;u.gender=t.getSelectedGender(t.getDialect()||r);u.locale=t.getDialect()||r;u.isMobile=n.data.isMobile;i.events.fire("onSearch",u)}),g.events.addListener("onLinkActivated",function(n){var u=new helpers.events.SpeakEvent;u.gender=t.getSelectedGender(t.getDialect()||r);u.locale=t.getDialect()||r;u.isMobile=n.data.isMobile;i.events.fire("onSearch",u)}));t.events.addListener("onUpdated",function(n){n.data!=null&&n.data.canSpeak?(o.show(),p.hide(),u.removeClass("disabled")):(o.hide(),p.show(),u.addClass("disabled"));n.data.canSelectDialect||n.data.canSelectGender?(s.show(),w.show()):(s.hide(),w.hide())}).addListener("onBeforeUpdate",function(){h.stop()}).addListener("onUpdateError",function(){t.close();s.hide();w.hide();o.hide();p.show();u.addClass("disabled")}).addListener("onSelectionChanged",function(n){n.data.gender=t.getSelectedGender(t.getDialect()||r);i.events.fire("onDialectChanged",n.data)}).addListener("onGenderChanged",function(n){n.data.locale=t.getDialect()||r;i.events.fire("onGenderChanged",n.data)});s.clickOrEnter(function(n){$(document).click();t.toggle();n.stopImmediatePropagation()});t.events.addListener("onDisplayToggled",function(n){n.data.visible?(o.addClass("active"),s.addClass("active")):(o.removeClass("active"),s.removeClass("active"))});o.clickOrEnter(function(n){var u=t.getSelectedGender(t.getDialect()||r),f=t.getDialect()||r,o=new helpers.events.SpeakEvent(u,f,!1,n);i.events.fire("onSpeak",o);h.play(e.val()||e.text(),t.getDialect()||r,t.getSelectedGender(t.getDialect()||r),i)});c.clickOrEnter(function(){h.stop()});u.clickOrEnter(function(n){if(u.hasClass("playing")||u.hasClass("loading"))h.stop();else{var f=t.getSelectedGender(t.getDialect()||r),o=t.getDialect()||r,s=new helpers.events.SpeakEvent(f,o,!0,n);i.events.fire("onSpeak",s);h.play(e.val()||e.text(),t.getDialect()||r,t.getSelectedGender(t.getDialect()||r),i)}});h.events.addListener("onLoading",function(n){n.data.ref===i&&(o.hide(),c.hide(),l.show(),u.addClass("loading"),u.removeClass("playing"))}).addListener("onEnd",function(n){n.data.ref===i&&(c.hide(),l.hide(),o.show(),u.removeClass("loading"),u.removeClass("playing"))}).addListener("onPlay",function(n){n.data.ref===i&&(o.hide(),l.hide(),c.show(),u.removeClass("loading"),u.addClass("playing"))}).addListener("onError",function(n){n.data.ref===i&&(c.hide(),l.hide(),o.show(),u.removeClass("loading"),u.removeClass("playing"))});$(document).click(function(){v.hide();a.removeClass("active")})},Translator=function(n){function s(){u!==-1&&(window.clearTimeout(u),u=-1)}function a(){s();u=window.setTimeout(function(){i.translateText(i.$src.val())},l)}function v(n){for(var c=n.split("\n"),u={},e,o,r,s,l,i=0;i<c.length;i++)e=c[i].trim(),o=e.hashCode(),(t[i]==null||t[i].crc!==o)&&(t[i]!=null&&t[i].activeAjaxQuery!=null&&(u[t[i].activeAjaxQuery]=1),t[i]=new h(o,e,!0));if(i<t.length)for(r=i;r<t.length;r++)u[t[r].activeAjaxQuery]=1,t.splice(r,1),r--;s=[];for(l in u)s.push(l);f(s)}function y(){var u,f,o,h,n;if(s(),t.length==1&&t[0].isMustTranslate()&&URL_ONLY_REGEX.test(t[0].text.trim())){t[0].translatedText=t[0].text.trim();t[0].mustTranslate=!1;setTimeout(function(){e()},0);return}for(u=[],n=0;n<t.length;n++)t[n].isMustTranslate()&&t[n].activeAjaxQuery==null&&u.push({id:t[n].crc,text:t[n].text.trim()});if(u.length!==0&&(i.events.fire("beginTranslating",{source:i,paragraphs:t}),f=JSON.stringify(u),o=f.hashCode(),r!=o))for(r=o,h=$.ajax({async:!0,contentType:"application/json; charset=utf-8",dataType:"json",method:"POST",url:i.settings.translationUrl.replace("{srcLocale}",i.sourceLocale.id).replace("{destLocale}",i.destinationLocale.id),data:f,success:p,error:w,processData:!1}),n=0;n<t.length;n++)t[n].isMustTranslate()&&t[n].activeAjaxQuery==null&&(t[n].activeAjaxQuery=h)}function p(n){for(var r,u=0;u<n.items.length;u++)for(r=0;r<t.length;r++)t[r].crc==n.items[u].id&&(t[r].mustTranslate=!1,t[r].activeAjaxQuery=null,t[r].translatedText=n.items[u].text,t[r].wordAlignment=n.items[u].wordAlignment);i.sourceLocale.lang=n.from||i.sourceLocale.lang;e()}function w(n,t,r){if(f(),t!="abort"){if(i.settings.onTranslateError)i.settings.onTranslateError(n,t,r);var u={status:n.status,statusText:n.statusText,responseText:n.responseText};i.events.fire("translationError",{source:i,error:{message:r,res:u},from:i.sourceLocale,to:i.destinationLocale})}}function f(n){var i;if(n==null)for(n=[],i=0;i<t.length;i++)t[i].activeAjaxQuery!=null&&(n.push(t[i].activeAjaxQuery),t[i].mustTranslate=!0,t[i].translatedText="",t[i].activeAjaxQuery=null);for(i=0;i<n.length;i++)try{n[i].abort()}catch(u){}r=-1}function e(){i.events.fire("endTranslating",{source:i,paragraphs:t,from:i.sourceLocale})}var i=this,h;if(this.settings=n,this.$src=null,this.sourceLocale=null,this.destinationLocale=null,this.events=new EventService,!n.translationUrl)throw"settings.translationUrl not specified.";var t=[],u=-1,c=n.triggerChars||" \n¿?¡!.:;,？！。：\b\r",l=parseInt(n.typeLag)||500,r=-1,o=!1;if(this.translateText=function(n){i.sourceLocale&&i.destinationLocale&&(f(),v(n),y())},this.retranslate=function(){t=[];r=-1;i.$src.val().length>0&&(i.events.fire("onRetranslate",i.$src.val()),i.translateText(i.$src.val()))},this.clearTranslation=function(){t=[];r=-1;e();i.events.fire("textCleared")},this.getParagraphAlignment=function(){for(var i=[],n=0;n<t.length;n++)i.push(t[n].wordAlignment||"");return i},this.getTranslationData=function(){return{paragraphs:t,from:i.sourceLocale,to:i.destinationLocale}},n.src instanceof jQuery||$(n.src).length>0){i.$src=$(n.src);i.$src.on("paste.translator",function(){o=!0}).on("input.translator propertychange.translator",function(){var n=i.$src.val();s();n.length===0?(f(),t=[],r=-1,e(),i.events.fire("textCleared")):o===!0?(i.events.fire("onTextPasted",n.trim()),i.translateText(n)):n.length>0&&c.indexOf(n[n.length-1])>-1?i.translateText(n):a();o=!1})}h=function(n,t,i){var r=this;this.crc=n;this.text=t;this.translatedText=null;this.mustTranslate=i;this.activeAjaxQuery=null;this.isMustTranslate=function(){return r.mustTranslate!=null&&r.mustTranslate&&r.text!=null&&r.text.length>0}}},LanguageDropdown=function(n){function o(n){var t=i.closest("tbody").find('td[value="'+n+'"]');return t.length==0?null:t.get(0)}function s(u,o,s){var c=t,h=u.attr("value");h===constants.autoDetectKey?(o=o||new Language,t=new Language(h,o.lang,o.lang.length>0?n.autoDetectFormatString.replace("{0}",o.display):u.text(),o.lang.length>0?o.isRtl:null)):t=new Language(h,h,u.text(),u.attr("isRtl")==="1");i.parent().find("td.selected").removeClass("selected");u.addClass("selected");r.hide();e.sanitizeHtmlAndSetText(t.display);(c.lang!==t.lang||c.id!==t.id)&&f.events.fire("onLanguageChanged",{from:c,to:t.clone(),origin:s})}var f=this;if(this.events=new EventService,this.getSelectedLanguage=function(){return t.clone()},this.setSelectedLanguage=function(t,r,u){var f=o(t);(f||(f=o(n.defaultLang),f||(f=i.closest("tbody").find("td").get(0),f)))&&s($(f),r,u)},this.close=function(){r.hide()},this.setLanguageTitle=function(n){e.text(n)},this.getLanguageById=function(n){var t=i.closest("tbody").find('td[value="'+n+'"]');return t.length===1?new Language(n,n===constants.autoDetectKey?"":n,t.text(),n===constants.autoDetectKey?null:t.attr("isrtl")==="1"):null},!n.src)throw"You must specify an immediate source container";n=$.extend({src:$(),lang:"",defaultLang:"",autoDetectFormatString:"",onLanguageChanged:null},n);var u=$(n.src),t=new Language,i=u.find(".LS_Item"),r=u.find(".LanguageList"),e=u.find(".LS_HeaderTitle"),h=u.find(".LS_Header");typeof n.onLanguageChanged=="function"&&f.events.addListener("onLanguageChanged",n.onLanguageChanged);i.click(function(n){t.id!=$(n.delegateTarget).attr("value")&&s($(n.delegateTarget))});h.clickOrEnter(function(n){var t=r.css("display")!="none";n.stopImmediatePropagation();$(document).click();t?r.hide():r.show()});f.setSelectedLanguage(n.lang,null,this)},HighlightingManager=function(){var n=null,r=null,t=null,c=null,s="inHighlight_",h="ouHighlight_",l="noHighlight_",i=null,a=!0,u=!1,f=!0,v=null,k=function(){n.css("z-index")!="2"&&(n.css("z-index","2"),t.css("z-index","0"))},y=function(){n.css("z-index","0");t.css("z-index","1")},w,o,b;this.initialize=function(f,s,h,l,a){v=this;var p=null;$(window).resize(function(){p&&clearTimeout(p);p=setTimeout(o,200)});$("body").resize(function(){p&&clearTimeout(p);p=setTimeout(o,200)});c=a;n=$(f);r=$(s);t=$(h);i=l;t.bind("mousemove",d);t.bind("mouseover",function(n){n.stopPropagation()});n.bind("mousemove",function(n){n.stopPropagation()});n.bind("mouseover",function(n){n.stopPropagation()});$(document).bind("mouseover",function(){e()});u=!0;y()};var e=function(){if(!f){var t="."+i,u=n.children("div"),e=r.children("div"),o=u.children(t),s=e.children(t);o.removeClass(i);s.removeClass(i);f=!0}},d=function(n){var t,i;k();t=document.elementFromPoint(n.clientX,n.clientY);t&&t.tagName.toLocaleLowerCase()=="span"?(i=jQuery.Event("mouseover"),i.clientX=n.clientX,i.clientY=n.clientY,$(t).trigger(i)):e();y();n.stopPropagation()},g=function(n,t){t=t==null?"":t;return t+"_"+n.srcInfo.replace(":","_")+"TO"+n.dstInfo.replace(":","_")},nt=constants.siteTranslationUrlPattern.replace("{url}","$1$2$3$4$5").replace("{from}",""),p=function(n,t,i,r,u,f,e){var y=$("<div><\/div>"),w="",a,s,o,l,p,b,h,v;if(y.attr("paragraphname",t),n.length>0){for(a=0;a<n.length;a++)s=n[a],s.content!=null&&(o=$("<span><\/span>"),l=s.content,o.text(l),f===!0&&URL_REGEX.test(l)&&(p=l.replace(URL_REGEX,"$1$2$3$4$5"),b=encodeURIComponent(p),o=$("<span><\/span>"),h=$("<a><\/a>"),h.attr("href",nt.replace("{to}",c.getSelectedLanguage().lang).replace("$1$2$3$4$5",b)),h.attr("target","_blank"),h.attr("rel","nofollow"),h.text(p),o.append(h)),w+=l,v=null,s.srcInfo!=null?(v=g(s,r),o.attr("srcinfo",s.srcInfo).attr("dstinfo",s.dstInfo).attr("paragraphname",t).attr("issource",e).bind("mouseover",tt)):v=u+Math.random().toString(),o.attr("id",v),o.after(" "),y.append(o));i.append(y)}return w},tt=function(n){n.stopPropagation();e();w(this)},it=function(n){var i=n.substring(0,2),t=null;return i==s.substring(0,2)?t=h.substring(0,2):i==h.substring(0,2)&&(t=s.substring(0,2)),t+n.substring(2)};this.setHighlightStatus=function(n){u&&(a=n,n||e())};w=function(t){var e=t.getAttribute("srcinfo"),o=t.getAttribute("dstinfo"),l=t.getAttribute("issource")==="true",s=t.getAttribute("paragraphname"),h=n.children("div[paragraphname='"+s+"']"),c=r.children("div[paragraphname='"+s+"']"),u=h.children("span[srcinfo='"+e+"']"),y=h.children("span[dstinfo='"+o+"']"),p=c.children("span[srcinfo='"+e+"']"),w=c.children("span[dstinfo='"+o+"']");a&&(u.addClass(i),y.addClass(i),p.addClass(i),w.addClass(i),u!==null&&u.text()!==null&&u.text().replace(/\s+/g,"")!==""&&v.fire({type:"onHighlighted",text:u.text(),isSource:l}),f=!1)};this.load=function(t){var f,i,e,c;if(u){if(f="",t!=null&&t.length>0){for(i=0;i<t.length;i++)e=t[i].inputContents,c=t[i].outputContents,$.trim(t[i].inputText)==""?(n.append($("<br><\/br>")),r.append($("<br><\/br>")),f+="\n"):(p(e,t[i].ParagraphName,n,s,l,!1,!0),f+=p(c,t[i].ParagraphName,r,h,l,!0,!1));b();setTimeout(o,200)}return f}};o=function(){n.height(t.height());n.width(t.width())};b=function(){for(var r=["line-height","font-family","font-weight","font-style","letter-spacing","word-wrap","border-top-width","border-right-width","border-bottom-width","border-left-width","direction","padding-top","padding-bottom","padding-left","padding-right","font-size","left","top"],i=0;i<r.length;i++)n.css(r[i],t.css(r[i]));n.offset(t.offset())};this.clear=function(){u&&(f=!0,r.empty(),n.empty())};this._listeners={};this.addListener=function(n,t){typeof this._listeners[n]=="undefined"&&(this._listeners[n]=[]);this._listeners[n].push(t)};this.fire=function(n){var i,t,r;if(typeof n=="string"&&(n={type:n}),n.target||(n.target=this),!n.type)throw new Error("Event object missing 'type' property.");if(this._listeners[n.type]instanceof Array)for(i=this._listeners[n.type],t=0,r=i.length;t<r;t++)i[t].call(this,n)};this.removeListener=function(n,t){var r,i,u;if(this._listeners[n]instanceof Array)for(r=this._listeners[n],i=0,u=r.length;i<u;i++)if((t==null||r[i]===t)&&(r.splice(i,1),t!=null))break};this.TranslationResultParser=new function(){var t={ar:"؟!.:،","zh-chs":"？！。：","zh-cht":"？！。：",cs:"?!.:,",da:"?!.:,",de:"?!.:,",el:"?!.:,",en:"?!.:,",es:"¿?¡!.:,",fr:"?!.:,",he:"?!.:,",hi:"?!.:,।",it:"?!.:,",ko:"?!.:,",nl:"?!.:,",no:"?!.:,",pl:"?!.:,",pt:"?!.:,",ru:"?!.:,",sv:"?!.:,",th:"!:",tr:" ?!.:,",ja:"？!。:"};this.parseResultsArray=function(n,t,r){for(var o=[],f=0,e,u=0;u<n.length&&f<t.paragraphs.length;u++,f++)$.trim(n[u]).length==0?$.trim(t.paragraphs[f]).length>0&&(e=i(n[u],"",t.from.lang,r,"paragraph"+u.toString())):e=i(n[u],t.paragraphs[f],t.from.lang,r,"paragraph"+u.toString()),o.push(e);return o};var i=function(t,i,o,s,h){var v,y,c,l,p,a;if(i==null||$.trim(t).length==0)v=n(c,t,"en"),y=n(l,"",s);else{if(c=[],l=[],i.wordAlignment!=null&&typeof i.wordAlignment=="string"&&i.wordAlignment!=""){for(p=$.trim(i.wordAlignment).split(" "),a=0;a<p.length;a++){var nt=p[a],g=nt.split("-"),w=g[0],b=g[1],k=e(w,t.length),d=e(b,i.translatedText.length);k!=null&&d!=null&&(c.push({start:k.start,end:k.end,srcInfo:w,dstInfo:b}),l.push({start:d.start,end:d.end,srcInfo:w,dstInfo:b}))}c.sort(f);l.sort(f);r(c);r(l);u(c,"dstInfo",t);u(l,"srcInfo",i.translatedText)}v=n(c,t,o);y=n(l,i.translatedText,s)}return{inputContents:v,inputText:t,outputContents:y,outputText:i==null?"":i.translatedText,ParagraphName:h}},r=function(n){for(var i,t=0;t<n.length-1;t++)(n[t].start==n[t+1].start||n[t+1].start<n[t].end)&&(i=n[t].end>n[t+1].end?n[t].end:n[t+1].end,n[t].end=i,n.splice(t+1,1),t--)},u=function(n,t,i){for(var u,r=0;r<n.length-1;r++)u=i.substring(n[r].end+1,n[r+1].start),(n[r].end+2==n[r+1].start||/^\s*$/.test(u))&&n[r][t]==n[r+1][t]&&(n[r].end=n[r+1].end,n.splice(r+1,1),r--)},s=function(n,t){var f,i;if(t=t.replace("\r",""),$.trim(t).length!=0){var s=/^([ ]*)(.*)$/.exec(t),u=s[1].length,h=s[1].length;if(u!=0)for(i=0;i<n.length;i++)n[i].start+=u,n[i].end+=u;for(f=0;f<n.length;f++){u=0;var e=n[f].start,o=n[f].end,r=-1;for(i=h;i<=e;i++)t[i]==" "&&r++,(t[i]!=" "||i==e)&&(r>0&&(u+=r,e+=r),r=t[i]!=" "?-1:0);for(o+=u,r=-1,i=e;i<=o;i++)t[i]==" "&&r++,(t[i]!=" "||i==o)&&(r>0&&(u+=r,o+=r),r=t[i]!=" "?-1:0);if(n[f].start=e,n[f].end=o,u!=0)for(i=f+1;i<n.length;i++)n[i].start+=u,n[i].end+=u;h=n[f].end+1}}},f=function(n,t){return n.start<t.start?-1:1},n=function(n,t,i){var f=[],r,u,s,e;if(n==null||n.length==0)return f.push({content:t,srcInfo:null,dstInfo:null,Start:null,End:null}),f;for(n[0].start!=0&&f.push({content:t.substring(0,n[0].start),srcInfo:null,dstInfo:null,Start:null,End:null}),r=0;r<n.length;r++)n[r]!=null&&(u=n[r],u.start<t.length&&u.end<t.length&&(s=t.substring(u.start,u.end+1),e=o(s,i),f.push({content:s,srcInfo:e?u.srcInfo:null,dstInfo:e?u.dstInfo:null,Start:e?u.start:null,End:e?u.end:null}),r+1<n.length&&n[r].end+1<n[r+1].start&&f.push({content:t.substring(n[r].end+1,n[r+1].start),srcInfo:null,dstInfo:null,Start:null,End:null})));return n[n.length-1].end!=t.length-1&&f.push({content:t.substring(n[n.length-1].end+1,t.length+1),srcInfo:null,dstInfo:null,Start:null,End:null}),f},e=function(n){if(n==null||n.length<3)return null;var t,i,r=$.trim(n).split(":");return(t=parseInt(r[0]),i=parseInt(r[1]),i<t)?null:t<0?null:{start:t,end:i}},o=function(n,i){var u=$.trim(n),f,r;return u.length>0&&(f=t[i.toLowerCase()],r=-1,f!=null&&(r=f.indexOf(u)),r==-1&&(r=t.en.indexOf(u)),r==-1)?!0:!1}}},MRUList=function(n){function u(n){var f,u,r,e;for(n=n||new Language,f=0,u=t.length-1;f<i.length;){if(r=i.eq(f),u>=0){if(e=t[u]||new Language,e.id===n.id){u--;continue}r.sanitizeHtmlAndSetText(e.display);r.data("mruLangId",e.id);r.show();u--}else r.text(""),r.data("mruLangId",""),r.hide();f++}}function f(){for(var r="",i=0;i<t.length;i++)i!=0&&(r+=","),r+=t[i].id;$.cookie(n.prefix+"_list",r,{expires:365})}function o(){var u=[],s,e,i,o;try{if(s=$.cookie(n.prefix+"_list"),typeof s=="string")for(e=s.split(","),i=0;i<e.length&&i<r;i++)e[i].length>0&&u.push(new Language(e[i]))}catch(h){}if(u.length==0)for(i=0;i<5;i++){if(o=$.cookie(n.prefix+i),!o)break;$.removeCookie(n.prefix+i);o&&i<r&&u.push(new Language(o))}t=u;f()}var e;if(this.events=new EventService,this.setCurrentLang=function(n){if(n=n||new Language,!n.isAutoDetect()){for(var i=0;i<t.length;i++)if(t[i]&&t[i].id==n.id){t.splice(i,1);break}t.push(n)}t.length>r&&t.splice(0,t.length-r);f();u(n)},!(n.container instanceof jQuery))throw"The container must be a jQuery object";e=this;n=$.extend({container:$(),cssClass:"mru",prefix:"mru"},n);var i=n.container.find("."+n.cssClass),r=i.length+1,t=[];i.clickOrEnter(function(){e.events.fire("onMruSelected",{langId:$(this).data("mruLangId")})});o();u()},CharacterCounter=function(n){var t=$(n.src),r=this,u=$(n.output),i;if(t.length===0)throw"You must assign a source textbox.";if(u.length===0)throw"You must specify the count container.";i=t.attr("maxlength")||n.max||null;this.updateCounter=function(){u.text(t.val().length+(i!=null?"/"+i:""))};t.bind("input propertychange",r.updateCounter);r.updateCounter()},Flyout=function(n){function u(){var r=this,i=n.parent.offset(),t={};t.top=i.top-$(document).scrollTop()+n.parent.outerHeight(!0);f?t.left=i.left:t.right=$(window).width()-i.left-n.parent.outerWidth();n.flyout.css(t);setTimeout(function(){var i=n.flyout.outerHeight(!0),r=$(window).height();i+t.top>r&&(t.top=r-i);n.flyout.css(t)},0)}function i(){t=!1;$(window).off("resize.flyout");$(window).off("scroll.flyout");$(document).off("click.flyout");n.flyout.hide()}var r;this.events=new EventService;r=this;this.show=function(){var f=new helpers.events.MobileMenuEvent;if(r.events.fire("onShow",f),!t){u();t=!0;n.flyout.show();$(window).on("resize.flyout",i);$(window).on("scroll.flyout",i);setTimeout(function(){$(document).on("click.flyout",function(n){$(n.target).closest(".mobile.voiceOptions").length||i()})},0)}};this.hide=function(){t&&i()};this.toggle=function(){t?this.hide():this.show()};this.isVisible=function(){return t};this.dispose=function(){i();n.parent.off("click.flyout")};n=$.extend({parent:$(),flyout:$(),show:"right",bind:!0},n||{});var l=this,f=n.show==="left",t=!1;if(n.parent instanceof jQuery||(n.parent=$(n.parent)),n.flyout instanceof jQuery||(n.flyout=$(n.flyout)),n.bind===!0)$(n.parent).on("click.flyout",this.show)};if(typeof jQuery=="undefined")throw"JQuery required";if(ajaxService=function(n){"use strict";var t=function(t,i,r){t&&n.ajax({async:!0,contentType:"application/json; charset=utf-8",dataType:"json",method:"POST",url:t.url,data:t.data,processData:!1}).done(i).fail(r)},i=function(t,i,r){t&&n.ajax({async:!0,contentType:"application/json; charset=utf-8",dataType:"json",type:"GET",url:t.url,processData:!1}).done(i).fail(r)};return{get:i,post:t}}(jQuery),typeof jQuery=="undefined")throw"JQuery required";if(typeof constants=="undefined")throw"constants required";if(typeof ajaxService=="undefined")throw"ajaxService required";if(dictionaryService=function(n,t){"use strict";function f(){return!0}function i(){return!0}var r={get:function(i,r,u){i.url=t.dictionary.lookupUrl.replace("{from}",i.from).replace("{to}",i.to).replace("{text}",encodeURI(i.text));f()?n.get(i,r,u):r("")}},u={get:function(r,u,f){r.url=t.dictionary.examplesUrl.replace("{from}",r.from).replace("{to}",r.to).replace("{text}",encodeURI(r.text)).replace("{translation}",encodeURI(r.translation));i()?n.get(r,u,f):u("")}},e={get:function(r,u,f){r.url=t.dictionary.examplesUrl.replace("{from}",r.from).replace("{to}",r.to).replace("{text}",encodeURI(r.text)).replace("{translation}",encodeURI(r.translation));i()?n.get(r,u,f):u("")}};return{lookup:r,examples:u}}(ajaxService,constants),typeof jQuery=="undefined")throw"JQuery required";if(typeof constants=="undefined")throw"constants required";try{if(typeof microsoft.applications.telemetry=="undefined")throw"Aria web telemetry required";}catch(ex){throw"Aria web telemetry required";}if(ariaModule=function(n,t,i){"use strict";function u(){if(typeof microsoft.applications.telemetry.LogManager=="undefined")throw"Aria telemetry LogManager required";t.LogManager.initialize(i.telemetry.tenant);t.LogManager.addCallbackListener(f);r=new t.Logger}function f(){}function e(t){var i=new microsoft.applications.telemetry.EventProperties;i.name=t.name;n.each(t.properties,function(n,t){i.setProperty(t.key,t.value)});r.logEvent(i)}var r=null;return u(),{sendEvent:e}}(jQuery,microsoft.applications.telemetry,constants),telemetryServices=function(n,t){"use strict";function r(n){return n.push(new i(t.telemetry.EventPropertyNameBag.browserName,t.telemetry.browser.name)),n.push(new i(t.telemetry.EventPropertyNameBag.browserType,t.telemetry.browser.type)),n.push(new i(t.telemetry.EventPropertyNameBag.browserVersion,t.telemetry.browser.version)),n.push(new i(t.telemetry.EventPropertyNameBag.os,t.telemetry.browser.os)),n.push(new i(t.telemetry.EventPropertyNameBag.clientId,t.clientId)),n.push(new i(t.telemetry.EventPropertyNameBag.browserIsMobileDevice,t.telemetry.browser.isMobileDevice)),t.telemetry.browser.mobileDeviceManufacturer&&t.telemetry.browser.mobileDeviceManufacturer.toLowerCase()!=="unknown"&&n.push(new i(t.telemetry.EventPropertyNameBag.browserMobileDeviceManufacturer,t.telemetry.browser.mobileDeviceManufacturer)),t.telemetry.browser.mobileDeviceModel&&t.telemetry.browser.mobileDeviceModel.toLowerCase()!=="unknown"&&n.push(new i(t.telemetry.EventPropertyNameBag.browserMobileDeviceModel,t.telemetry.browser.mobileDeviceModel)),n}function u(t,i,u){t.properties=r(t.properties);n.sendEvent(t,i,u)}function i(n,t,i){this.key=n;this.value=t;this.other=i}function f(n,t){this.name=n;this.properties=[];t!=null&&(this.properties=t)}return{sendEvent:u,EventProperty:i,Event:f}}(ariaModule,constants),typeof jQuery=="undefined")throw"JQuery required";if(typeof constants=="undefined")throw"constants required";if(typeof ajaxService=="undefined")throw"ajaxService required";if(typeof dictionaryService=="undefined")throw"dictionaryService required";if(typeof telemetryServices=="undefined")throw"telemetryServices required";if(services=function(n,t,i){"use strict";return{ajax:n,dictionary:t,telemetry:i}}(ajaxService,dictionaryService,telemetryServices),typeof jQuery=="undefined")throw"JQuery required";if(templatesManager=function(n){"use strict";var t=function(t){var i={},u={templates:{}},r;return t&&(r=n("script[type='"+t.templateScriptType+"']"),r.length>0&&(i={},r.each(function(t,r){i[n(r).attr("id")]=n(r).html().trim()})),u.templates=i),u};return{get:t}}(jQuery),typeof constants=="undefined")throw"constants required";if(typeof services=="undefined")throw"services module required";if(typeof templatesManager=="undefined")throw"templatesManager required";if(DictionaryView=function(n){function ui(){t=ci()}function fi(n){var t=!0;return n.from!=null&&n.from.length!=0&&u()||(t=!1),t}function ei(n){var t=!0;return n.from!=null&&n.from.length!=0&&u()||(t=!1),t}function u(){return constants.dictionary.isDictionaryEnabled}function dt(n){n=n||{};i.events.fire("onBeforeLayout");ai(n);gt({})}function oi(){}function si(n){gt(n)}function hi(){}function ci(){var n=li(),t=templatesManager.get(n);return t.templates}function li(){return{templateScriptType:ri}}function ai(n){var t=!1;r=null;t=er(n.items);var u=di(n),f=gi(n.items),e=vi(n.items),o=nr(t),s=e.replace(/{{title}}/g,u).replace(/{{parts}}/g,f).replace(/{{expand-translations}}/g,o);sr();$(w).children().remove();$(w).append(s);or();i.events.fire("onAfterLayout")}function gt(n){r=null;var t=pi(n.items),i=yi(n.items),u=i.replace(/{{examples}}/g,t);cr();$(b).children().remove();$(b).append(u);v();hr()}function v(n){var t,i,u;if(r==null&&(r=$(ii)),r.length>0){u=r.filter("."+c);switch(n){case!0:t=r.index(u);i=(t+1)%r.length;break;case!1:t=r.index(u);i=t-1<0?r.length-1:t-1;break;default:t=0;i=0}$(r[t]).addClass(g);$(r[t]).removeClass(c);$(r[i]).removeClass(g);$(r[i]).addClass(c)}}function vi(n){var i="";return n&&n.length>0&&ut in t&&(i=t[ut]),i}function yi(n){var i="";return n&&n.length>0&&ft in t&&(i=t[ft]),i}function pi(n){var i="",r="",u="";return n!=null&&et in t&&(i=t[et],r=wi(n),u=bi(n),i=i.replace(/{{examples-valid}}/g,r),i=i.replace(/{{examples-none}}/g,u)),i}function wi(n){var i="",r="";return n!=null&&n.length>0&&wt in t&&(i=t[wt],$.each(n,function(n,t){r+=ki(t)}),i=i.replace(/{{examples-sentences-pairs}}/g,r)),i}function bi(n){var i="";return(n==null||n.length==0)&&bt in t&&(i=i=t[bt]),i}function ki(n){var r="";return ot in t&&(r=t[ot],r=r.replace(/{{source-language}}/g,i.settings.fromDisplay).replace(/{{source-prefix}}/g,n.sourcePrefix).replace(/{{source-term}}/g,n.sourceTerm).replace(/{{source-suffix}}/g,n.sourceSuffix).replace(/{{target-language}}/g,i.settings.toDisplay).replace(/{{target-prefix}}/g,n.targetPrefix).replace(/{{target-term}}/g,n.targetTerm).replace(/{{target-suffix}}/g,n.targetSuffix)),r}function di(n){var i="";return n&&n.items&&n.items.length>0&&st in t&&(i=t[st],i=i.replace(/{{translation-context}}/g,n.displaySource)),i}function gi(n){var i="",r="",u="";return n&&n.length>0&&ht in t&&(r=t[ht],$.each(n,function(n,t){u=tr(t);i+=r.replace(/{{translations-by-part}}/g,u)})),i}function nr(n){var i="";return n&&kt in t&&(i=t[kt],i=i.replace(/{{expansion-label}}/g,constants.dictionary.expandMoreLabel)),i}function tr(n){var i="",r="",u="";return n&&ct in t&&(i=t[ct],$.each(n,function(n,t){u=fr(t.posTag);r+=ir(t)}),i=i.replace(/{{posTag}}/g,u),i=i.replace(/{{translation_list}}/g,r)),i}function ir(n){var i="",r="",u="";return lt in t&&(i=t[lt],i=i.replace(/{{leftWidthPercent}}/g,ni(n.confidence,!0)).replace(/{{rightWidthPercent}}/g,ni(n.confidence)),u=rr(n),i=i.replace(/{{translation}}/g,u),r=ur(n.backTranslations,n.normalizedTarget),i=i.replace(/{{back_translations}}/g,r),i=i.replace(/{{expand-class}}/g,n.isHidden?it+" "+l:"")),i}function rr(n){var i="";return n.prefixWord!=null&&n.prefixWord.length==0&&vt in t?i=t[vt]:n.prefixWord!=null&&n.prefixWord&&n.prefixWord.length>0&&at in t&&(i=t[at],i=i.replace(/{{prefix-word}}/g,n.prefixWord)),i.replace(/{{displayTarget}}/g,n.displayTarget)}function ur(n,i){var u="",f="",o="",r;return yt in t&&pt in t&&(f=t[yt],o=t[pt],r=n.length>constants.dictionary.numberOfBackTranslations?constants.dictionary.numberOfBackTranslations:n.length,$.each(n,function(n,t){if(n>=r)return!1;u+=r==1||r-1==n?o.replace(/{{translated-text}}/g,i).replace(/{{displayText}}/g,t.displayText).replace(/{{class-name}}/g,t.numExamples>0?e:s):f.replace(/{{translated-text}}/g,i).replace(/{{displayText}}/g,t.displayText).replace(/{{class-name}}/g,t.numExamples>0?e:s)})),u}function ni(n,t){var r=0,i=parseFloat(n);return r=i==null||isNaN(i)||i<.05?20:i<.1?40:i<.2?60:i<3.5?80:100,t?100-r:r}function fr(n){return constants.dictionary.partOfSpeech[n]}function er(n){var t=null,i;return n==null||n.length==0?!1:($.each(n,function(n,i){$.each(i,function(n,i){t=y(t,i)})}),i=p(t,constants.dictionary.numberOfVisibleTranslations),i<=0?!0:!1)}function y(n,t){return n==null?n=t:n.confidence<=t.confidence?n.right=y(n.right,t):n.left=y(n.left,t),n}function p(n,t){if(n==null)return t;var i=p(n.right,t);return i>0?(n.isHidden=!1,i--):n.isHidden=!0,p(n.left,i)}function or(){$(o).on("click.dictionary.backtranslation",function(n){i.events.fire("onExamples",n)});$(h).on("click.dictionary.expand",function(n){i.events.fire("onExpandClicked",n)})}function sr(){$(o).off("click.dictionary.backtranslation");$(h).off("click.dictionary.expand")}function hr(){$(k).on("click.dictionary.examples",function(n){i.events.fire("onPreviousExampleClicked",n)});$(d).on("click.dictionary.examples",function(n){i.events.fire("onNextExampleClicked",n)})}function cr(){$(k).off("click.dictionary.examples");$(d).off("click.dictionary.examples")}var i=this;this.settings=n||{};this.events=new EventService;var t=null,w="#mt-alternate-translations-lookup-feature-container",b="#mt-alternate-translations-examples-feature-container",e="mt-back-translation",o="."+e,s="mt-back-translation-no-examples",lr="."+s,k=".mt-example-previous",d=".mt-example-next",h=".mt-expand-btn",g="mt-hidden",c="mt-example-pair-selected",f="mt-expand-more",ar="."+f,nt="mt-expand-less",ti="."+nt,tt=".mt-expand-label",it="mt-expand-indicator",rt="."+it,l="mt-expand-height",a="mt-back-translation-selected",vr="."+a,ii=".mt-examples-sentence-pair-container",ri="text/x-mt-template",tt=".mt-expand-label",ut="feature-lookup-template",ft="feature-examples-template",et="examples-template",ot="examples-sentence-pair-template",st="translation-title-template",ht="parts-template",ct="pos-template",lt="translation-template",at="prefix-template",vt="no-prefix-template",yt="back-translation-template",pt="back-translation-last-template",wt="examples-valid-template",bt="examples-none-template",kt="expand-translations-template",r=null;this.lookup=function(n,t,r,u,f){if(typeof f=="string"){var e={from:n,to:r,text:f};i.settings.from=n;i.settings.fromDisplay=t;i.settings.to=r;i.settings.toDisplay=u;fi(e)&&(i.events.fire("onLookup"),services.dictionary.lookup.get(e,dt,oi))}};this.examples=function(n,t,i,r){if(typeof i=="string"){var u={from:n,to:t,text:i,translation:r};ei(u)&&services.dictionary.examples.get(u,si,hi)}};this.clear=function(){u()&&dt({})};this.nextExample=function(){u()&&v(!0)};this.previousExample=function(){u()&&v(!1)};i.events.addListener("onExpandClicked",function(){var n=$(h);n.hasClass(f)?(i.events.fire("onShowMore"),n.removeClass(f),n.addClass(ti),$(rt).removeClass(l),$(tt).html(constants.dictionary.expandLessLabel)):(i.events.fire("onShowLess"),n.removeClass(nt),n.addClass(f),$(rt).addClass(l),$(tt).html(constants.dictionary.expandMoreLabel))});i.events.addListener("onNextExampleClicked",function(){i.nextExample()});i.events.addListener("onPreviousExampleClicked",function(){i.previousExample()});i.events.addListener("onExamples",function(n){var t=$(n.data.target),r=t.data("translated-text"),u=t.text();$(o).removeClass(a);t.addClass(a);i.examples(i.settings.from,i.settings.to,u,r)});ui()},function(n){"use strict";var t=n("#banner"),i="mst_banner_hidden";n(".mt-banner-close-container").on("click.banner",function(){t.hide();window.localStorage&&window.localStorage.setItem(i,!0)});window.localStorage&&window.localStorage.getItem(i)==="true"?t.hide():/Edge\/\d+/i.test(navigator.userAgent||"")?t.hasClass("mt-edge-extension")&&window.chrome&&t.show():t.show()}(jQuery),typeof constants=="undefined")throw"constants required";if(typeof services=="undefined")throw"services required";if(typeof services.telemetry=="undefined")throw"telemetry services required";typeof helpers=="undefined",function(n,t,i){(function(n){(function(n){var r=function(){function n(n,r){var u=new i.Event(t.telemetry.EventNameBag.applicationAction);u.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.action,n));u.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.target,r));u.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.isNewUser,t.telemetry.user.isNewUser));i.sendEvent(u)}return n}();n.logEvent=r})(n.applicationAction||(n.applicationAction={})),function(n){var r=function(){function n(n,r){var u=new i.Event(t.telemetry.EventNameBag.appsAction);u.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.action,n));u.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.target,r));i.sendEvent(u)}return n}();n.logEvent=r}(n.appsAction||(n.appsAction={})),function(n){var r=function(){function n(n){var r=new i.Event(t.telemetry.EventNameBag.dictionaryAction);r.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.action,n));i.sendEvent(r)}return n}();n.logEvent=r}(n.dictionaryAction||(n.dictionaryAction={})),function(n){var r=function(){function n(n){var r=new i.Event(t.telemetry.EventNameBag.feedbackAction);r.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.action,n));i.sendEvent(r)}return n}();n.logEvent=r}(n.feedbackAction||(n.feedbackAction={})),function(n){var r=function(){function n(n){var r=new i.Event(t.telemetry.EventNameBag.hoverAction);r.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.source,n));i.sendEvent(r)}return n}();n.logEvent=r}(n.hoverAction||(n.hoverAction={})),function(n){var r=function(){function n(n,r,u){var f=new i.Event(t.telemetry.EventNameBag.languageAction);f.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.source,n));f.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.target,r));f.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.language,u));i.sendEvent(f)}return n}();n.logEvent=r}(n.languageAction||(n.languageAction={})),function(n){var r=function(){function n(n,r){var u=new i.Event(t.telemetry.EventNameBag.mobileMenuAction);u.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.action,n));u.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.source,r));i.sendEvent(u)}return n}();n.logEvent=r}(n.mobileMenuAction||(n.mobileMenuAction={})),function(n){var r=function(){function n(n,r){var u=new i.Event(t.telemetry.EventNameBag.shareAction);u.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.action,n));u.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.target,r));u.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.source,t.telemetry.EventPropertyValueBag.destination));i.sendEvent(u)}return n}();n.logEvent=r}(n.shareAction||(n.shareAction={})),function(n){var r=function(){function n(n,r){var u=new i.Event(t.telemetry.EventNameBag.searchAction);u.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.action,n));u.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.isMobile,r));i.sendEvent(u)}return n}();n.logEvent=r}(n.searchAction||(n.searchAction={})),function(n){var r=function(){function n(n,r){var u=new i.Event(t.telemetry.EventNameBag.translateAction);u.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.action,n));u.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.length,r));i.sendEvent(u)}return n}();n.logEvent=r}(n.translateAction||(n.translateAction={})),function(n){var r=function(){function n(n,r,u,f,e){var o=new i.Event(t.telemetry.EventNameBag.ttsAction);o.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.action,n));o.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.source,r));o.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.isMobile,u));o.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.gender,f));o.properties.push(new i.EventProperty(t.telemetry.EventPropertyNameBag.locale,e));i.sendEvent(o)}return n}();n.logEvent=r}(n.ttsAction||(n.ttsAction={}))})(n.telemetryServices||(n.telemetryServices={}))}(helpers||(helpers={}),constants,services.telemetry),function(n){(function(n){var u=function(){function n(n,t,i,r){this.gender=n;this.locale=t;this.isMobile=i||!1;this.event=r}return n}(),t,i,r;n.SpeakEvent=u;t=function(){function n(n,t){this.isMobile=n||!1;this.event=t}return n}();n.LinkEvent=t;i=function(){function n(n){this.isMobile=!0;this.event=n}return n}();n.MobileMenuEvent=i;r=function(){function n(n){this.isEmail=!1;this.isFacebook=!1;this.isLinkedIn=!1;this.isTwitter=!1;this.event=n}return n}();n.ShareEvent=r})(n.events||(n.events={}));var t=n.events}(helpers||(helpers={}),constants),function(n,t){(function(n){var i=function(){function n(n){t.post(n)}return n}();n.logEvent=i})(n.feedback||(n.feedback={}));var i=n.feedback}(helpers||(helpers={}),services.ajax)
